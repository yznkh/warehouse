<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Education Sector Survey | National Cybersecurity Center</title>
    <!-- Local Bootstrap CSS -->
    <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.min.css">
    <!--<link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.rtl.min.css">-->

    <!-- Local FontAwesome CSS -->
    <link rel="stylesheet" href="/lib/fontawesome/dist/css/all.min.css">

    <style>
        :root {
            --primary: #005f87;
            --secondary: #003d57;
            --accent: #f7931e;
            --light: #e6f4f9;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --gradient-primary: linear-gradient(135deg, #005f87 0%, #003d57 100%);
            --gradient-accent: linear-gradient(135deg, #f7931e 0%, #e07d0a 100%);
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --shadow-lg: 0 8px 24px rgba(0,0,0,0.15);
            --border-radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }

        /* Header Styles */
        .ncsc-header {
            background: var(--gradient-primary);
            color: white;
            padding: 1.5rem 0;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

            .ncsc-header::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
                opacity: 0.3;
            }

        .ncsc-logo {
            height: 60px;
            margin-right: 15px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
        }

        /* Main Container */
        .main-container {
            max-width: 1000px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        /* Wizard Container */
        .wizard-container {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            position: relative;
        }

        /* Progress Header */
        .progress-header {
            background: var(--gradient-accent);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
        }

            .progress-header h1 {
                font-size: 2rem;
                font-weight: 700;
                margin-bottom: 0.5rem;
            }

            .progress-header p {
                font-size: 1.1rem;
                opacity: 0.9;
                margin: 0;
            }

        /* Step Progress */
        .step-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            position: relative;
        }

            .step-progress::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 2rem;
                right: 2rem;
                height: 2px;
                background: #e9ecef;
                z-index: 1;
            }

        .step-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
            background: #f8f9fa;
            padding: 0 1rem;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e9ecef;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-bottom: 0.5rem;
            transition: var(--transition);
            border: 3px solid #e9ecef;
        }

            .step-circle.active {
                background: var(--accent);
                color: white;
                border-color: var(--accent);
                transform: scale(1.1);
                box-shadow: 0 0 0 4px rgba(247, 147, 30, 0.2);
            }

            .step-circle.completed {
                background: var(--success);
                color: white;
                border-color: var(--success);
            }

        .step-label {
            font-size: 0.85rem;
            font-weight: 500;
            color: #6c757d;
            text-align: center;
        }

            .step-label.active {
                color: var(--accent);
                font-weight: 600;
            }

        /* Form Content */
        .form-content {
            padding: 2rem;
        }

        .form-step {
            display: none;
            animation: fadeInUp 0.5s ease-out;
        }

            .form-step.active {
                display: block;
            }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Section Cards */
        .section-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid #e9ecef;
            transition: var(--transition);
        }

            .section-card:hover {
                box-shadow: var(--shadow-md);
                transform: translateY(-2px);
            }

        .section-title {
            color: var(--primary);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

            .section-title i {
                color: var(--accent);
                font-size: 1.25rem;
            }

        /* Question Groups */
        .question-group {
            margin-bottom: 2rem;
            padding: 1.5rem;
            border-radius: var(--border-radius);
            background: #f8f9fa;
            border-left: 4px solid var(--accent);
            transition: var(--transition);
            position: relative;
        }

            .question-group:hover {
                background: #f1f3f4;
                transform: translateX(4px);
            }

        .question-label {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 1rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .required-indicator {
            color: var(--danger);
            font-size: 0.9rem;
        }

        /* Enhanced Form Controls */
        .form-floating {
            position: relative;
            margin-bottom: 1rem;
        }

            .form-floating > .form-control,
            .form-floating > .form-select {
                height: calc(3.5rem + 2px);
                line-height: 1.25;
                border-radius: var(--border-radius);
                border: 2px solid #e9ecef;
                transition: var(--transition);
                background: white;
            }

                .form-floating > .form-control:focus,
                .form-floating > .form-select:focus {
                    border-color: var(--accent);
                    box-shadow: 0 0 0 0.25rem rgba(247, 147, 30, 0.15);
                    transform: translateY(-1px);
                }

            .form-floating > label {
                color: #6c757d;
                font-weight: 500;
            }

        /* Custom Checkboxes and Radios */
        .form-check {
            margin-bottom: 0.75rem;
            padding-left: 2rem;
        }

        .form-check-input {
            width: 1.25rem;
            height: 1.25rem;
            margin-left: -2rem;
            border: 2px solid #dee2e6;
            transition: var(--transition);
        }

            .form-check-input:checked {
                background-color: var(--accent);
                border-color: var(--accent);
                transform: scale(1.1);
            }

        .form-check-label {
            font-weight: 500;
            color: #495057;
            cursor: pointer;
            transition: var(--transition);
        }

        .form-check:hover .form-check-label {
            color: var(--primary);
        }

        /* Grid Layout for Checkboxes */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .locations-grid {
            border: 1px solid #e9ecef;
            border-radius: var(--border-radius);
            padding: 1rem;
            background-color: #f8f9fa;
        }

            .locations-grid .form-check {
                margin-bottom: 0.5rem;
                padding-left: 0;
            }

            .locations-grid .form-check-input {
                margin-right: 0.5rem;
                MARGIN-LEFT: 1.5px;
            }

        /* Number Input Groups */
        .number-input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: end;
        }

        .number-input-item {
            flex: 1;
            min-width: 120px;
        }

        /* Navigation Buttons */
        .form-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
        }

        .btn-nav {
            padding: 0.75rem 2rem;
            font-weight: 600;
            border-radius: 50px;
            transition: var(--transition);
            border: none;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary-nav {
            background: var(--gradient-primary);
            color: white;
            box-shadow: var(--shadow-sm);
        }

            .btn-primary-nav:hover {
                transform: translateY(-2px);
                box-shadow: var(--shadow-md);
                color: white;
            }

        .btn-accent-nav {
            background: var(--gradient-accent);
            color: white;
            box-shadow: var(--shadow-sm);
        }

            .btn-accent-nav:hover {
                transform: translateY(-2px);
                box-shadow: var(--shadow-md);
                color: white;
            }

        .btn-outline-nav {
            background: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

            .btn-outline-nav:hover {
                background: var(--primary);
                color: white;
                transform: translateY(-2px);
            }

        /* Progress Bar */
        .progress-bar-custom {
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-accent);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 3px;
        }

        /* Validation Messages */
        .invalid-feedback {
            display: block;
            color: var(--danger);
            font-size: 0.875rem;
            margin-top: 0.25rem;
            font-weight: 500;
        }

        .valid-feedback {
            display: block;
            color: var(--success);
            font-size: 0.875rem;
            margin-top: 0.25rem;
            font-weight: 500;
        }

        /* Loading States */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        .spinner {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Review Summary */
        .review-summary-item {
            padding: 1rem;
            border-bottom: 1px solid #e9ecef;
        }

            .review-summary-item:last-child {
                border-bottom: none;
            }

        .review-question {
            font-weight: 600;
            color: var(--primary);
        }

        .review-answer {
            color: var(--secondary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .main-container {
                margin: 1rem auto;
                padding: 0 0.5rem;
            }

            .progress-header {
                padding: 1.5rem;
            }

                .progress-header h1 {
                    font-size: 1.5rem;
                }

            .step-progress {
                padding: 1rem;
                flex-wrap: wrap;
                gap: 1rem;
            }

                .step-progress::before {
                    display: none;
                }

            .form-content {
                padding: 1rem;
            }

            .section-card {
                padding: 1.5rem;
            }

            .question-group {
                padding: 1rem;
            }

            .checkbox-grid {
                grid-template-columns: 1fr;
            }

            .number-input-group {
                flex-direction: column;
                align-items: stretch;
            }

            .form-navigation {
                padding: 1rem;
                flex-direction: column;
                gap: 1rem;
            }

            .btn-nav {
                width: 100%;
                justify-content: center;
            }
        }

        /* Auto-save Indicator */
        .auto-save-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 50px;
            font-size: 0.875rem;
            font-weight: 500;
            opacity: 0;
            transform: translateY(-10px);
            transition: var(--transition);
            z-index: 1000;
        }

            .auto-save-indicator.show {
                opacity: 1;
                transform: translateY(0);
            }

        /* Tooltip Styles */
        .tooltip-trigger {
            position: relative;
            cursor: help;
            color: var(--info);
            margin-left: 0.25rem;
        }

        .tooltip-content {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition);
            z-index: 1000;
        }

        .tooltip-trigger:hover .tooltip-content {
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Auto-save Indicator -->
    <div class="auto-save-indicator" id="autoSaveIndicator">
        <i class="fas fa-check-circle me-1"></i>
        Changes saved automatically
    </div>

    <!-- Header with NCSC Logo -->
    <header class="ncsc-header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-2 text-center text-md-start">
                    <img src="/Image/NCSC_LOGO.png" alt="National Cybersecurity Center" class="ncsc-logo">
                </div>
                <div class="col-md-10 text-center text-md-start">
                    <h1 class="h4 mb-0">National Cybersecurity Center</h1>
                    <p class="mb-0">SOC Maturity Assessment Survey for Education Sector</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Survey Container -->
    <div class="main-container">
        <div class="wizard-container">
            <!-- Progress Header -->
            <div class="progress-header">
                <h1>Education Sector Survey</h1>
                <p>Comprehensive assessment of SOC capabilities for educational institutions</p>
            </div>

            <div class="step-progress">
                <div class="step-item">
                    <div class="step-circle active" id="step1">1</div>
                    <span class="step-label active">Basic Info</span>
                </div>
                <div class="step-item">
                    <div class="step-circle" id="step2">2</div>
                    <span class="step-label">IT Assets</span>
                </div>
                <div class="step-item">
                    <div class="step-circle" id="step3">3</div>
                    <span class="step-label">OT/IoT</span>
                </div>
                <div class="step-item">
                    <div class="step-circle" id="step4">4</div>
                    <span class="step-label">Security</span>
                </div>
                <div class="step-item">
                    <div class="step-circle" id="step5">5</div>
                    <span class="step-label">Review</span>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-bar-custom">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- Form Content -->
            <div class="form-content">
                <form id="educationSurveyForm">
                    <!-- Step 1: Basic Information -->
                    <div class="form-step active" id="formStep1">
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-building"></i>
                                Organization Information
                            </h2>

                            <div class="question-group">
                                <label class="question-label" for="orgName">
                                    Organization Name
                                    <span class="required-indicator">*</span>
                                    <i class="fas fa-info-circle tooltip-trigger">
                                        <span class="tooltip-content">Enter the full legal name of your organization</span>
                                    </i>
                                </label>
                                <div class="form-floating">
                                    <input type="text" class="form-control" name="orgName" id="orgName" placeholder="Organization Name" required>
                                    <label for="orgName">Enter organization name</label>
                                </div>
                                <div class="invalid-feedback" id="orgNameError"></div>
                            </div>

                            <div class="question-group">
                                <label class="question-label" for="entitySector">
                                    Sector Type
                                    <span class="required-indicator">*</span>
                                </label>
                                <div class="form-floating">
                                    <select class="form-select" name="entitySector" id="entitySector" required>
                                        <option value="">Choose sector type</option>
                                        <option value="Government">Government</option>
                                        <option value="Private">Private</option>
                                    </select>
                                    <label for="entitySector">Select sector type</label>
                                </div>
                                <div class="invalid-feedback" id="entitySectorError"></div>
                            </div>

                            <div class="question-group">
                                <label class="question-label" for="eduType">
                                    Educational Entity Type
                                    <span class="required-indicator">*</span>
                                </label>
                                <div class="form-floating">
                                    <select class="form-select" id="eduType" name="eduType" required>
                                        <option value="">Choose entity type</option>
                                        <option value="University">University</option>
                                        <option value="School">School</option>
                                        <option value="Technical Institute">Technical Institute</option>
                                        <option value="Research Center">Research Center</option>
                                        <option value="Other">Other (specify)</option>
                                    </select>
                                    <label for="eduType">Select educational entity type</label>
                                </div>
                                <div class="invalid-feedback" id="eduTypeError"></div>
                                <div class="form-floating mt-2" id="eduTypeOther" style="display: none;">
                                    <input type="text" class="form-control" name="eduTypeOther" placeholder="Specify type">
                                    <label>Please specify</label>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="question-group">
                                        <label class="question-label" for="numCampuses">
                                            Number of Campuses/Locations
                                            <span class="required-indicator">*</span>
                                        </label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numCampuses" id="numCampuses" min="1" placeholder="Number of campuses" required>
                                            <label for="numCampuses">Enter number</label>
                                        </div>
                                        <div class="invalid-feedback" id="numCampusesError"></div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="question-group">
                                        <label class="question-label">
                                            Campus Locations
                                            <span class="required-indicator">*</span>
                                        </label>
                                        <div class="locations-grid">
                                            <div class="row">
                                                <!-- First Row (5 columns) -->
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2" style=" width: 19.666667%;">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="amman" value="Amman">
                                                        <label class="form-check-label" for="amman">Amman</label>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="irbid" value="Irbid">
                                                        <label class="form-check-label" for="irbid">Irbid</label>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="zarqa" value="Zarqa">
                                                        <label class="form-check-label" for="zarqa">Zarqa</label>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="balqa" value="Balqa">
                                                        <label class="form-check-label" for="balqa">Balqa</label>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="madaba" value="Madaba">
                                                        <label class="form-check-label" for="madaba">Madaba</label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <!-- Second Row (5 columns) -->
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="jerash" value="Jerash">
                                                        <label class="form-check-label" for="jerash">Jerash</label>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="ajloun" value="Ajloun">
                                                        <label class="form-check-label" for="ajloun">Ajloun</label>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="karak" value="Karak">
                                                        <label class="form-check-label" for="karak">Karak</label>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="tafilah" value="Tafilah">
                                                        <label class="form-check-label" for="tafilah">Tafilah</label>
                                                    </div>
                                                </div>
                                                <div class="col-12 col-sm-6 col-md-4 col-lg-2">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" name="campusLocations[]" id="maan" value="Ma'an">
                                                        <label class="form-check-label" for="maan">Ma'an</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="invalid-feedback" id="campusLocationsError">Please select at least one location</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: IT Assets -->
                    <div class="form-step" id="formStep2">
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-server"></i>
                                IT Asset Inventory
                            </h2>

                            <h3 class="h5 mb-4" style="color: var(--primary);">
                                <i class="fas fa-shield-alt me-2"></i>
                                Security Devices
                            </h3>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numFirewalls">Number of Firewalls</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numFirewalls" id="numFirewalls" min="0" placeholder="Number of firewalls">
                                            <label for="numFirewalls">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numEmailGateways">Email Security Gateways</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numEmailGateways" id="numEmailGateways" min="0" placeholder="Number of email gateways">
                                            <label for="numEmailGateways">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numWAF">Web Application Firewalls (WAF)</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numWAF" id="numWAF" min="0" placeholder="Number of WAF">
                                            <label for="numWAF">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="question-group">
                                        <label class="question-label" for="numIPS">Intrusion Prevention Systems (IPS)</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numIPS" id="numIPS" min="0" placeholder="Number of IPS">
                                            <label for="numIPS">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="question-group">
                                        <label class="question-label" for="numAntimalware">Anti-malware/Endpoint Protection</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numAntimalware" id="numAntimalware" min="0" placeholder="Number of endpoints">
                                            <label for="numAntimalware">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="question-group">
                                <label class="question-label" for="otherCyberDevices">Other Cybersecurity Devices</label>
                                <div class="form-floating">
                                    <textarea class="form-control" name="otherCyberDevices" id="otherCyberDevices" style="height: 100px" placeholder="Describe other devices"></textarea>
                                    <label for="otherCyberDevices">Describe any other cybersecurity devices</label>
                                </div>
                            </div>

                            <h3 class="h5 mt-4 mb-4" style="color: var(--primary);">
                                <i class="fas fa-database me-2"></i>
                                Servers
                            </h3>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numEmailServers">Email Servers</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numEmailServers" id="numEmailServers" min="0" placeholder="Number of email servers">
                                            <label for="numEmailServers">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numAppServers">Application Servers</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numAppServers" id="numAppServers" min="0" placeholder="Number of application servers">
                                            <label for="numAppServers">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numDbServers">Database Servers</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numDbServers" id="numDbServers" min="0" placeholder="Number of database servers">
                                            <label for="numDbServers">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="question-group">
                                        <label class="question-label" for="numWebServers">Web Servers</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numWebServers" id="numWebServers" min="0" placeholder="Number of web servers">
                                            <label for="numWebServers">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="question-group">
                                        <label class="question-label" for="otherServers">Other Servers</label>
                                        <div class="form-floating">
                                            <input type="text" class="form-control" name="otherServers" id="otherServers" placeholder="Specify other servers">
                                            <label for="otherServers">Specify other server types</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <h3 class="h5 mt-4 mb-4" style="color: var(--primary);">
                                <i class="fas fa-network-wired me-2"></i>
                                Network Devices
                            </h3>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numRouters">Routers</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numRouters" id="numRouters" min="0" placeholder="Number of routers">
                                            <label for="numRouters">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numSwitches">Switches</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numSwitches" id="numSwitches" min="0" placeholder="Number of switches">
                                            <label for="numSwitches">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numWirelessAccessPoints">Wireless Access Points</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numWirelessAccessPoints" id="numWirelessAccessPoints" min="0" placeholder="Number of wireless access points">
                                            <label for="numWirelessAccessPoints">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="question-group">
                                        <label class="question-label" for="numNetworkMonitoring">Network Monitoring Devices</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numNetworkMonitoring" id="numNetworkMonitoring" min="0" placeholder="Number of network monitoring devices">
                                            <label for="numNetworkMonitoring">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="question-group">
                                        <label class="question-label" for="otherNetworkDevices">Other Network Devices</label>
                                        <div class="form-floating">
                                            <input type="text" class="form-control" name="otherNetworkDevices" id="otherNetworkDevices" placeholder="Specify other network devices">
                                            <label for="otherNetworkDevices">Specify other network devices</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: OT/IoT Devices -->
                    <div class="form-step" id="formStep3">
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-network-wired"></i>
                                OT/IoT/IIoT Devices
                            </h2>

                            <!-- Question 23 -->
                            <div class="question-group">
                                <label class="question-label">Do you have Building Management Systems (BMS) devices deployed in your facilities?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="bmsDevices" id="bmsYes" value="Yes">
                                    <label class="form-check-label" for="bmsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="bmsDevices" id="bmsNo" value="No">
                                    <label class="form-check-label" for="bmsNo">No</label>
                                </div>
                            </div>

                            <!-- Question 24 -->
                            <div class="question-group">
                                <label class="question-label">Do you have HVAC systems connected to your network?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="hvacSystems" id="hvacYes" value="Yes">
                                    <label class="form-check-label" for="hvacYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="hvacSystems" id="hvacNo" value="No">
                                    <label class="form-check-label" for="hvacNo">No</label>
                                </div>
                            </div>

                            <!-- Question 25 -->
                            <div class="question-group">
                                <label class="question-label">Do you use UPS systems with remote monitoring capabilities?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="upsSystems" id="upsYes" value="Yes">
                                    <label class="form-check-label" for="upsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="upsSystems" id="upsNo" value="No">
                                    <label class="form-check-label" for="upsNo">No</label>
                                </div>
                            </div>

                            <!-- Question 26 -->
                            <div class="question-group">
                                <label class="question-label">Are there smart lighting or energy management systems?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="smartLighting" id="smartLightingYes" value="Yes">
                                    <label class="form-check-label" for="smartLightingYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="smartLighting" id="smartLightingNo" value="No">
                                    <label class="form-check-label" for="smartLightingNo">No</label>
                                </div>
                            </div>

                            <!-- Question 27 -->
                            <div class="question-group">
                                <label class="question-label">Do your facilities include access control or monitoring (CCTV) systems integrated with IT/IoT?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="accessControl" id="accessControlYes" value="Yes">
                                    <label class="form-check-label" for="accessControlYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="accessControl" id="accessControlNo" value="No">
                                    <label class="form-check-label" for="accessControlNo">No</label>
                                </div>
                            </div>

                            <!-- Question 28 -->
                            <div class="question-group">
                                <label class="question-label">Are smart classroom technologies used (e.g., connected projectors, smart boards, tablets)?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="smartClassroom" id="smartClassroomYes" value="Yes">
                                    <label class="form-check-label" for="smartClassroomYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="smartClassroom" id="smartClassroomNo" value="No">
                                    <label class="form-check-label" for="smartClassroomNo">No</label>
                                </div>
                            </div>

                            <!-- Question 29 -->
                            <div class="question-group">
                                <label class="question-label">Do you use any environmental sensors (temperature, humidity, air quality) connected via IoT?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="envSensors" id="envSensorsYes" value="Yes">
                                    <label class="form-check-label" for="envSensorsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="envSensors" id="envSensorsNo" value="No">
                                    <label class="form-check-label" for="envSensorsNo">No</label>
                                </div>
                            </div>

                            <!-- Question 30 -->
                            <div class="question-group">
                                <label class="question-label">Are there any connected lab equipment/devices used in science or engineering departments?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="labEquipment" id="labEquipmentYes" value="Yes">
                                    <label class="form-check-label" for="labEquipmentYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="labEquipment" id="labEquipmentNo" value="No">
                                    <label class="form-check-label" for="labEquipmentNo">No</label>
                                </div>
                            </div>

                            <!-- Other OT Devices -->
                            <div class="question-group">
                                <label class="question-label" for="otherOtDevices">Are there any additional OT/IoT/IIoT devices not listed above?</label>
                                <div class="form-floating">
                                    <input type="text" class="form-control" name="otherOtDevices" id="otherOtDevices" placeholder="Specify other devices">
                                    <label for="otherOtDevices">Specify other devices</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Step 4: Security -->
                    <div class="form-step" id="formStep4">
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-shield-alt"></i>
                                Security Capabilities
                            </h2>

                            <div class="question-group">
                                <label class="question-label">Does your organization have a Security Operations Center (SOC)?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="hasSOC" id="hasSOCYes" value="Yes">
                                    <label class="form-check-label" for="hasSOCYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="hasSOC" id="hasSOCNo" value="No">
                                    <label class="form-check-label" for="hasSOCNo">No</label>
                                </div>
                            </div>

                            <div class="question-group soc-dependent" id="socTypeGroup">
                                <label class="question-label" for="socType">What type of SOC does your organization operate?</label>
                                <div class="form-floating">
                                    <select class="form-select" name="socType" id="socType">
                                        <option value="">Select SOC type</option>
                                        <option value="In-house">In-house</option>
                                        <option value="Outsourced">Outsourced</option>
                                        <option value="Hybrid">Hybrid</option>
                                    </select>
                                    <label for="socType">Select SOC type</label>
                                </div>
                            </div>

                            <div class="question-group soc-dependent" id="socCoverageGroup">
                                <label class="question-label" for="socCoverage">Which environments does your SOC cover?</label>
                                <div class="form-floating">
                                    <select class="form-select" name="socCoverage" id="socCoverage">
                                        <option value="">Select coverage</option>
                                        <option value="IT only">IT only</option>
                                        <option value="OT only">OT only</option>
                                        <option value="Both">Both</option>
                                    </select>
                                    <label for="socCoverage">Select environments covered</label>
                                </div>
                            </div>

                            <div class="question-group soc-dependent" id="socOperationalTimeGroup">
                                <label class="question-label" for="socOperationalTime">How long has your SOC been operational?</label>
                                <div class="form-floating">
                                    <select class="form-select" name="socOperationalTime" id="socOperationalTime">
                                        <option value="">Select operational time</option>
                                        <option value="< 1 year">Less than 1 year</option>
                                        <option value="1-3 years">1-3 years</option>
                                        <option value="3-5 years">3-5 years</option>
                                        <option value="> 5 years">More than 5 years</option>
                                    </select>
                                    <label for="socOperationalTime">Select operational time</label>
                                </div>
                            </div>

                            <div class="row soc-dependent">
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numCampusesOperated">Number of campuses operated</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numCampusesOperated" id="numCampusesOperated" min="0" placeholder="Number of campuses">
                                            <label for="numCampusesOperated">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numMonitoredCampuses">Campuses monitored by SOC</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numMonitoredCampuses" id="numMonitoredCampuses" min="0" placeholder="Number of campuses">
                                            <label for="numMonitoredCampuses">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="question-group">
                                        <label class="question-label" for="numLogsCampuses">Campuses sending logs to SOC/SIEM</label>
                                        <div class="form-floating">
                                            <input type="number" class="form-control" name="numLogsCampuses" id="numLogsCampuses" min="0" placeholder="Number of campuses">
                                            <label for="numLogsCampuses">Enter number</label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="question-group soc-dependent">
                                <label class="question-label">Which systems/devices are integrated into SOC/SIEM?</label>
                                <div class="checkbox-grid">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="integratedSystems[]" id="sysFirewalls" value="Firewalls">
                                                <label class="form-check-label" for="sysFirewalls">Firewalls</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="integratedSystems[]" id="sysRouters" value="Routers">
                                                <label class="form-check-label" for="sysRouters">Routers</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="integratedSystems[]" id="sysLMS" value="LMS">
                                                <label class="form-check-label" for="sysLMS">Learning Management System (LMS)</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="integratedSystems[]" id="sysAD" value="AD">
                                                <label class="form-check-label" for="sysAD">Active Directory (AD)</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="integratedSystems[]" id="sysStudentInfo" value="Student Info Systems">
                                                <label class="form-check-label" for="sysStudentInfo">Student information systems</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="integratedSystems[]" id="sysOT" value="OT systems">
                                                <label class="form-check-label" for="sysOT">OT systems</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="question-group soc-dependent">
                                <label class="question-label" for="percentageAssets">Percentage of assets covered by SIEM/SOC?</label>
                                <div class="form-floating">
                                    <select class="form-select" name="percentageAssets" id="percentageAssets">
                                        <option value="">Select percentage</option>
                                        <option value="<25%">Less than 25%</option>
                                        <option value="25-50%">25-50%</option>
                                        <option value="51-75%">51-75%</option>
                                        <option value=">75%">More than 75%</option>
                                    </select>
                                    <label for="percentageAssets">Select coverage percentage</label>
                                </div>
                            </div>

                            <div class="question-group soc-dependent">
                                <label class="question-label">Does SOC cover OT/IoT/IIoT environments?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="otCoverage" id="otCoverageYes" value="Yes">
                                    <label class="form-check-label" for="otCoverageYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="otCoverage" id="otCoverageNo" value="No">
                                    <label class="form-check-label" for="otCoverageNo">No</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="otCoverage" id="otCoverageNA" value="Not Applicable">
                                    <label class="form-check-label" for="otCoverageNA">Not Applicable</label>
                                </div>
                            </div>

                            <div class="question-group soc-dependent" id="otSystemsGroup">
                                <label class="question-label">What are the main OT/IoT systems being monitored (if any)?</label>
                                <div class="checkbox-grid">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="otSystemsMonitored[]" id="otHVAC" value="HVAC">
                                                <label class="form-check-label" for="otHVAC">HVAC systems</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="otSystemsMonitored[]" id="otBMS" value="BMS">
                                                <label class="form-check-label" for="otBMS">Building Management System (BMS)</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="otSystemsMonitored[]" id="otUPS" value="UPS">
                                                <label class="form-check-label" for="otUPS">UPS systems</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="otSystemsMonitored[]" id="otAccessControl" value="Access Control">
                                                <label class="form-check-label" for="otAccessControl">Access control systems</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="otSystemsMonitored[]" id="otNone" value="None">
                                                <label class="form-check-label" for="otNone">None</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="question-group soc-dependent" id="otPercentageGroup">
                                <label class="question-label" for="percentageOTAssets">What percentage of OT/IoT/IIoT assets are monitored by SOC?</label>
                                <div class="form-floating">
                                    <select class="form-select" name="percentageOTAssets" id="percentageOTAssets">
                                        <option value="">Select percentage</option>
                                        <option value="<25%">Less than 25%</option>
                                        <option value="25-50%">25-50%</option>
                                        <option value="51-75%">51-75%</option>
                                        <option value=">75%">More than 75%</option>
                                    </select>
                                    <label for="percentageOTAssets">Select coverage percentage</label>
                                </div>
                            </div>

                            <div class="question-group soc-dependent">
                                <label class="question-label">What cybersecurity monitoring tools are used in your SOC?</label>
                                <div class="checkbox-grid">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="cyberTools[]" id="toolSentinel" value="Microsoft Sentinel">
                                                <label class="form-check-label" for="toolSentinel">Microsoft Sentinel</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="cyberTools[]" id="toolSplunk" value="Splunk">
                                                <label class="form-check-label" for="toolSplunk">Splunk</label>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="cyberTools[]" id="toolQRadar" value="IBM QRadar">
                                                <label class="form-check-label" for="toolQRadar">IBM QRadar</label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" name="cyberTools[]" id="toolOther" value="Other">
                                                <label class="form-check-label" for="toolOther">Other (specify)</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-floating mt-2" id="cyberToolsOther" style="display: none;">
                                    <input type="text" class="form-control" name="cyberToolsOther" placeholder="Specify other tools">
                                    <label>Please specify other tools</label>
                                </div>
                            </div>
                            <!-- Question 44 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Use education-specific monitoring tools?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="educationMonitoringTools" id="educationMonitoringToolsYes" value="Yes" required>
                                    <label class="form-check-label" for="educationMonitoringToolsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="educationMonitoringTools" id="educationMonitoringToolsNo" value="No">
                                    <label class="form-check-label" for="educationMonitoringToolsNo">No</label>
                                </div>
                            </div>
                            <!-- 45 -->
                            <div class="question-group soc-dependent" >
                                <label class="question-label">Does SOC conduct periodic threat simulations?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="threatSimulations" id="threatSimulationsYes" value="Yes" required>
                                    <label class="form-check-label" for="threatSimulationsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="threatSimulations" id="threatSimulationsNo" value="No">
                                    <label class="form-check-label" for="threatSimulationsNo">No</label>
                                </div>
                            </div>
                            <!-- 46 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Defined incident response playbooks?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="incidentPlaybooks" id="incidentPlaybooksYes" value="Yes" required>
                                    <label class="form-check-label" for="incidentPlaybooksYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="incidentPlaybooks" id="incidentPlaybooksNo" value="No">
                                    <label class="form-check-label" for="incidentPlaybooksNo">No</label>
                                </div>
                            </div>
                            <!-- 47 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Is SIEM integrated with threat intel services?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="siemThreatIntel" id="siemThreatIntelYes" value="Yes" required>
                                    <label class="form-check-label" for="siemThreatIntelYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="siemThreatIntel" id="siemThreatIntelNo" value="No">
                                    <label class="form-check-label" for="siemThreatIntelNo">No</label>
                                </div>
                            </div>
                            <!-- 48 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Does SOC use SOAR platforms?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socSoarPlatforms" id="socSoarPlatformsYes" value="Yes" required>
                                    <label class="form-check-label" for="socSoarPlatformsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socSoarPlatforms" id="socSoarPlatformsNo" value="No">
                                    <label class="form-check-label" for="socSoarPlatformsNo">No</label>
                                </div>
                            </div>
                            <!-- 49 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Systems integrated with SIEM?</label>
                                <select class="form-select" name="systemsIntegratedSiem" id="systemsIntegratedSiem" required>
                                    <option value="">Select system</option>
                                    <option value="IT">IT</option>
                                    <option value="OT">OT</option>
                                    <option value="IoT">IoT</option>
                                    <option value="All">All</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <!-- 50 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Is there real-time correlation between IT and OT event data in your SOC?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="realtimeCorrelation" id="realtimeCorrelationYes" value="Yes" required>
                                    <label class="form-check-label" for="realtimeCorrelationYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="realtimeCorrelation" id="realtimeCorrelationNo" value="No">
                                    <label class="form-check-label" for="realtimeCorrelationNo">No</label>
                                </div>
                            </div>
                            <!-- 51 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Are there regulatory requirements that mandate security monitoring in your sector?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="regulatoryRequirements" id="regulatoryRequirementsYes" value="Yes" required>
                                    <label class="form-check-label" for="regulatoryRequirementsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="regulatoryRequirements" id="regulatoryRequirementsNo" value="No">
                                    <label class="form-check-label" for="regulatoryRequirementsNo">No</label>
                                </div>
                            </div>
                            <!-- 52 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you have a governance structure overseeing SOC operations?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="governanceStructure" id="governanceStructureYes" value="Yes" required>
                                    <label class="form-check-label" for="governanceStructureYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="governanceStructure" id="governanceStructureNo" value="No">
                                    <label class="form-check-label" for="governanceStructureNo">No</label>
                                </div>
                            </div>
                            <!-- 53 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you perform regular SOC readiness assessments?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socReadinessAssessments" id="socReadinessAssessmentsYes" value="Yes" required>
                                    <label class="form-check-label" for="socReadinessAssessmentsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socReadinessAssessments" id="socReadinessAssessmentsNo" value="No">
                                    <label class="form-check-label" for="socReadinessAssessmentsNo">No</label>
                                </div>
                            </div>
                            <!-- 54 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you perform regular audits of your SOC capabilities and maturity?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socAudits" id="socAuditsYes" value="Yes" required>
                                    <label class="form-check-label" for="socAuditsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socAudits" id="socAuditsNo" value="No">
                                    <label class="form-check-label" for="socAuditsNo">No</label>
                                </div>
                            </div>
                            <!-- 55 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you maintain documentation of cybersecurity roles, responsibilities, and processes?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="docCyberRoles" id="docCyberRolesYes" value="Yes" required>
                                    <label class="form-check-label" for="docCyberRolesYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="docCyberRoles" id="docCyberRolesNo" value="No">
                                    <label class="form-check-label" for="docCyberRolesNo">No</label>
                                </div>
                            </div>
                            <!-- 56 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you maintain documentation of SOC procedures and playbooks?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="docSocProcedures" id="docSocProceduresYes" value="Yes" required>
                                    <label class="form-check-label" for="docSocProceduresYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="docSocProcedures" id="docSocProceduresNo" value="No">
                                    <label class="form-check-label" for="docSocProceduresNo">No</label>
                                </div>
                            </div>
                            <!-- 57 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you maintain a list of Critical Infrastructure systems?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="crownJewelSystems" id="crownJewelSystemsYes" value="Yes" required>
                                    <label class="form-check-label" for="crownJewelSystemsYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="crownJewelSystems" id="crownJewelSystemsNo" value="No">
                                    <label class="form-check-label" for="crownJewelSystemsNo">No</label>
                                </div>
                            </div>
                            <!-- 58 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Has the institution conducted a Business Impact Analysis (BIA)?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="businessImpactAnalysis" id="businessImpactAnalysisYes" value="Yes" required>
                                    <label class="form-check-label" for="businessImpactAnalysisYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="businessImpactAnalysis" id="businessImpactAnalysisNo" value="No">
                                    <label class="form-check-label" for="businessImpactAnalysisNo">No</label>
                                </div>
                            </div>
                            <!-- 59 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you have a dedicated IT Security Team?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="itSecurityTeam" id="itSecurityTeamYes" value="Yes" required>
                                    <label class="form-check-label" for="itSecurityTeamYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="itSecurityTeam" id="itSecurityTeamNo" value="No">
                                    <label class="form-check-label" for="itSecurityTeamNo">No</label>
                                </div>
                            </div>
                            <!-- 60 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you have a designated CISO or equivalent role?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="cisoRole" id="cisoRoleYes" value="Yes" required>
                                    <label class="form-check-label" for="cisoRoleYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="cisoRole" id="cisoRoleNo" value="No">
                                    <label class="form-check-label" for="cisoRoleNo">No</label>
                                </div>
                            </div>
                            <!-- 61 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Size of SOC team (personnel)?</label>
                                <input type="number" class="form-control" name="socTeamSize" id="socTeamSize" min="0" required>
                            </div>
                            <!-- 62 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Does SOC operate 24/7?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socOperate247" id="socOperate247Yes" value="Yes" required>
                                    <label class="form-check-label" for="socOperate247Yes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socOperate247" id="socOperate247No" value="No">
                                    <label class="form-check-label" for="socOperate247No">No</label>
                                </div>
                            </div>
                            <!-- 63 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Is SOC centralized or distributed?</label>
                                <select class="form-select" name="socCentralized" id="socCentralized" required>
                                    <option value="">Select</option>
                                    <option value="Centralized">Centralized</option>
                                    <option value="Distributed">Distributed</option>
                                    <option value="Hybrid">Hybrid</option>
                                </select>
                            </div>
                            <!-- 64 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">What tools are used for log management?</label>
                                <select class="form-select" name="logManagementTools" id="logManagementTools" required>
                                    <option value="">Select tool</option>
                                    <option value="SIEM">SIEM</option>
                                    <option value="Syslog">Syslog</option>
                                    <option value="Cloud">Cloud</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <!-- 65 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Does SOC integrate with CERT?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socIntegrateCert" id="socIntegrateCertYes" value="Yes" required>
                                    <label class="form-check-label" for="socIntegrateCertYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="socIntegrateCert" id="socIntegrateCertNo" value="No">
                                    <label class="form-check-label" for="socIntegrateCertNo">No</label>
                                </div>
                            </div>
                            <!-- 66 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you conduct regular threat hunting exercises?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="threatHunting" id="threatHuntingYes" value="Yes" required>
                                    <label class="form-check-label" for="threatHuntingYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="threatHunting" id="threatHuntingNo" value="No">
                                    <label class="form-check-label" for="threatHuntingNo">No</label>
                                </div>
                            </div>
                            <!-- 67 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Do you receive OT/IoT-specific threat intelligence feeds?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="iotThreatIntel" id="iotThreatIntelYes" value="Yes" required>
                                    <label class="form-check-label" for="iotThreatIntelYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="iotThreatIntel" id="iotThreatIntelNo" value="No">
                                    <label class="form-check-label" for="iotThreatIntelNo">No</label>
                                </div>
                            </div>
                            <!-- 68 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Are there challenges in monitoring legacy systems?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="legacySystemsChallenges" id="legacySystemsChallengesYes" value="Yes" required>
                                    <label class="form-check-label" for="legacySystemsChallengesYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="legacySystemsChallenges" id="legacySystemsChallengesNo" value="No">
                                    <label class="form-check-label" for="legacySystemsChallengesNo">No</label>
                                </div>
                            </div>
                            <!-- 69 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Is there an integration with SOAR platforms?</label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="soarIntegration" id="soarIntegrationYes" value="Yes" required>
                                    <label class="form-check-label" for="soarIntegrationYes">Yes</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="soarIntegration" id="soarIntegrationNo" value="No">
                                    <label class="form-check-label" for="soarIntegrationNo">No</label>
                                </div>
                            </div>
                            <!-- 70 -->
                            <div class="question-group soc-dependent">
                                <label class="question-label">Annual SOC budget?</label>
                                <input type="number" class="form-control" name="socBudget" id="socBudget" min="0" required>
                            </div>
                        </div>
                    </div>



                    <!-- Step 5: Review -->
                    <div class="form-step" id="formStep5">
                        <div class="section-card">
                            <h2 class="section-title">
                                <i class="fas fa-check-circle"></i>
                                Review & Submit
                            </h2>

                            <div id="reviewSummary">
                                <!-- Summary will be generated by JavaScript -->
                            </div>

                            <div class="question-group">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="confirmAccuracy" required>
                                    <label class="form-check-label" for="confirmAccuracy">
                                        I confirm all information provided is accurate
                                    </label>
                                    <div class="invalid-feedback">You must confirm the accuracy before submitting</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Navigation -->
            <div class="form-navigation">
                <button type="button" class="btn btn-outline-nav" id="prevBtn" style="display: none;">
                    <i class="fas fa-arrow-left"></i>
                    Previous
                </button>
                <div class="d-flex align-items-center gap-2">
                    <span class="text-muted">Step <span id="currentStep">1</span> of 5</span>
                </div>
                <button type="button" class="btn btn-accent-nav" id="nextBtn">
                    Next
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>
    </div>

    <script src="/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Survey wizard functionality
        let currentStepIndex = 0;
        const totalSteps = 5;
        let formData = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            updateProgress();
            setupEventListeners();
            setupAutoSave();
            loadSavedData();
        });

        function setupEventListeners() {
            // Navigation buttons
            document.getElementById('nextBtn').addEventListener('click', nextStep);
            document.getElementById('prevBtn').addEventListener('click', prevStep);

            // Form validation
            const form = document.getElementById('educationSurveyForm');
            form.addEventListener('input', validateCurrentStep);

            // Special handling for select changes
            document.getElementById('eduType').addEventListener('change', function () {
                const otherField = document.getElementById('eduTypeOther');
                if (this.value === 'Other') {
                    otherField.style.display = 'block';
                    otherField.querySelector('input').required = true;
                } else {
                    otherField.style.display = 'none';
                    otherField.querySelector('input').required = false;
                }
            });

            // Handle SOC-dependent questions
            document.getElementById('hasSOCYes').addEventListener('change', () => handleSocVisibility(true));
            document.getElementById('hasSOCNo').addEventListener('change', () => handleSocVisibility(false));

            // Handle "Other" fields
            document.getElementById('toolOther').addEventListener('change', function () {
                document.getElementById('cyberToolsOther').style.display = this.checked ? 'block' : 'none';
            });
            document.getElementById('eduSpecificToolsYes').addEventListener('change', function () {
                document.getElementById('eduSpecificToolsOther').style.display = this.checked ? 'block' : 'none';
            });
            document.getElementById('soarPlatformsYes').addEventListener('change', function () {
                document.getElementById('soarPlatformsOther').style.display = this.checked ? 'block' : 'none';
            });
        }

        function handleSocVisibility(hasSOC) {
            const socDependentElements = document.querySelectorAll('.soc-dependent');
            socDependentElements.forEach(el => {
                el.style.display = hasSOC ? 'block' : 'none';
                // Reset values if hidden
                if (!hasSOC) {
                    const inputs = el.querySelectorAll('input, select, textarea');
                    inputs.forEach(input => {
                        if (input.type === 'checkbox' || input.type === 'radio') {
                            input.checked = false;
                        } else {
                            input.value = '';
                        }
                        input.required = false;
                    });
                }
            });
        }

        function validateCheckboxes() {
            const checkboxes = document.querySelectorAll('input[name="campusLocations[]"]');
            let checked = false;
            checkboxes.forEach(cb => {
                if (cb.checked) checked = true;
            });

            const errorElement = document.getElementById('campusLocationsError');
            if (!checked) {
                errorElement.style.display = 'block';
                return false;
            } else {
                errorElement.style.display = 'none';
                return true;
            }
        }

        function nextStep() {
            if (validateCurrentStep()) {
                if (currentStepIndex < totalSteps - 1) {
                    currentStepIndex++;
                    showStep(currentStepIndex);
                    updateProgress();

                    // Generate review summary when reaching the last step
                    if (currentStepIndex === totalSteps - 1) {
                        generateReviewSummary();
                    }
                } else {
                    submitForm();
                }
            }
        }

        function prevStep() {
            if (currentStepIndex > 0) {
                currentStepIndex--;
                showStep(currentStepIndex);
                updateProgress();
            }
        }

        function showStep(stepIndex) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(step => {
                step.classList.remove('active');
            });

            // Show current step
            document.getElementById(`formStep${stepIndex + 1}`).classList.add('active');

            // Update navigation buttons
            document.getElementById('prevBtn').style.display = stepIndex === 0 ? 'none' : 'flex';

            const nextBtn = document.getElementById('nextBtn');
            if (stepIndex === totalSteps - 1) {
                nextBtn.innerHTML = '<i class="fas fa-check"></i> Submit Survey';
                nextBtn.className = 'btn btn-primary-nav';
            } else {
                nextBtn.innerHTML = 'Next <i class="fas fa-arrow-right"></i>';
                nextBtn.className = 'btn btn-accent-nav';
            }
        }

        function updateProgress() {
            const progressPercent = ((currentStepIndex + 1) / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progressPercent + '%';
            document.getElementById('currentStep').textContent = currentStepIndex + 1;

            // Update step circles
            for (let i = 1; i <= totalSteps; i++) {
                const circle = document.getElementById(`step${i}`);
                const label = circle.nextElementSibling;

                if (i <= currentStepIndex + 1) {
                    circle.classList.add('active');
                    label.classList.add('active');
                    if (i < currentStepIndex + 1) {
                        circle.classList.add('completed');
                        circle.innerHTML = '<i class="fas fa-check"></i>';
                    } else {
                        circle.classList.remove('completed');
                        circle.textContent = i;
                    }
                } else {
                    circle.classList.remove('active', 'completed');
                    label.classList.remove('active');
                    circle.textContent = i;
                }
            }
        }

        function validateCurrentStep() {
            const currentStep = document.getElementById(`formStep${currentStepIndex + 1}`);
            const requiredFields = currentStep.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                const errorElement = document.getElementById(field.id + 'Error');

                if (!field.value.trim()) {
                    field.classList.add('is-invalid');
                    if (errorElement) {
                        errorElement.textContent = 'This field is required.';
                    }
                    isValid = false;
                } else {
                    field.classList.remove('is-invalid');
                    field.classList.add('is-valid');
                    if (errorElement) {
                        errorElement.textContent = '';
                    }
                }
            });

            // Special validation for checkboxes in step 1
            if (currentStepIndex === 0) {
                isValid = isValid && validateCheckboxes();
            }

            return isValid;
        }

        function setupAutoSave() {
            const form = document.getElementById('educationSurveyForm');
            let saveTimeout;

            form.addEventListener('input', function () {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(() => {
                    saveFormData();
                    // Show auto-save indicator
                    const indicator = document.getElementById('autoSaveIndicator');
                    indicator.classList.add('show');
                    setTimeout(() => {
                        indicator.classList.remove('show');
                    }, 2000);
                }, 1000);
            });
        }

        function saveFormData() {
            const form = document.getElementById('educationSurveyForm');
            const formData = new FormData(form);

            // Convert FormData to object
            const data = {};
            formData.forEach((value, key) => {
                // Handle checkboxes and radio buttons
                if (key.endsWith('[]')) {
                    if (!data[key]) data[key] = [];
                    data[key].push(value);
                } else {
                    data[key] = value;
                }
            });

            // Save to localStorage
            localStorage.setItem('educationSurveyData', JSON.stringify(data));
        }

        function loadSavedData() {
            const savedData = localStorage.getItem('educationSurveyData');
            if (savedData) {
                const data = JSON.parse(savedData);
                const form = document.getElementById('educationSurveyForm');

                // Populate form fields
                Object.keys(data).forEach(key => {
                    const value = data[key];
                    const inputs = form.querySelectorAll(`[name="${key}"]`);

                    if (inputs.length > 1) {
                        // Handle checkboxes and radio buttons
                        inputs.forEach(input => {
                            if (Array.isArray(value)) {
                                if (value.includes(input.value)) {
                                    input.checked = true;
                                }
                            } else if (input.value === value) {
                                input.checked = true;
                            }
                        });
                    } else {
                        // Handle other inputs
                        const input = inputs[0];
                        if (input) {
                            input.value = value;

                            // Trigger change event for select elements
                            if (input.tagName === 'SELECT') {
                                const event = new Event('change');
                                input.dispatchEvent(event);
                            }
                        }
                    }
                });

                // Handle SOC visibility based on saved data
                if (data.hasSOC === 'Yes') {
                    handleSocVisibility(true);
                } else if (data.hasSOC === 'No') {
                    handleSocVisibility(false);
                }
            }
        }

        function generateReviewSummary() {
            const form = document.getElementById('educationSurveyForm');
            const formData = new FormData(form);
            const summaryContainer = document.getElementById('reviewSummary');

            // Clear previous summary
            summaryContainer.innerHTML = '';

            // Group questions by section
            const sections = {
                'Organization Information': [
                    { id: 'orgName', label: 'Organization Name' },
                    { id: 'entitySector', label: 'Sector Type' },
                    { id: 'eduType', label: 'Educational Entity Type' },
                    { id: 'eduTypeOther', label: 'Other Entity Type' },
                    { id: 'numCampuses', label: 'Number of Campuses' },
                    { id: 'campusLocations[]', label: 'Campus Locations', isArray: true }
                ],
                'IT Asset Inventory': [
                    { id: 'numFirewalls', label: 'Number of Firewalls' },
                    { id: 'numEmailGateways', label: 'Email Security Gateways' },
                    { id: 'numWAF', label: 'Web Application Firewalls' },
                    { id: 'numIPS', label: 'Intrusion Prevention Systems' },
                    { id: 'numAntimalware', label: 'Anti-malware/Endpoint Protection' },
                    { id: 'otherCyberDevices', label: 'Other Cybersecurity Devices' },
                    { id: 'numEmailServers', label: 'Email Servers' },
                    { id: 'numAppServers', label: 'Application Servers' },
                    { id: 'numDbServers', label: 'Database Servers' },
                    { id: 'numWebServers', label: 'Web Servers' },
                    { id: 'otherServers', label: 'Other Servers' },
                    { id: 'numRouters', label: 'Routers' },
                    { id: 'numSwitches', label: 'Switches' },
                    { id: 'numWirelessAccessPoints', label: 'Wireless Access Points' },
                    { id: 'numNetworkMonitoring', label: 'Network Monitoring Devices' },
                    { id: 'otherNetworkDevices', label: 'Other Network Devices' }
                ],
                'OT/IoT Devices': [
                    { id: 'bmsDevices', label: 'Education-specific Tools' },
                    { id: 'hvacSystems', label: 'Education Tools Specified' },
                    { id: 'upsSystems', label: 'Threat Simulations' },
                    { id: 'smartLighting', label: 'Incident Playbooks' },
                    { id: 'accessControl', label: 'Threat Intel Integration' },
                    { id: 'smartClassroom', label: 'SOAR Platforms' },
                    { id: 'envSensors', label: 'SOAR Platforms Specified' },
                    { id: 'labEquipment', label: 'IT-OT Correlation' }

                ],


                'Security Capabilities': [
                    { id: 'hasSOC', label: 'Has SOC' },
                    { id: 'socType', label: 'SOC Type' },
                    { id: 'socCoverage', label: 'SOC Coverage' },
                    { id: 'socOperationalTime', label: 'SOC Operational Time' },
                    { id: 'numCampusesOperated', label: 'Campuses Operated' },
                    { id: 'numMonitoredCampuses', label: 'Campuses Monitored' },
                    { id: 'numLogsCampuses', label: 'Campuses Sending Logs' },
                    { id: 'integratedSystems[]', label: 'Integrated Systems', isArray: true },
                    { id: 'percentageAssets', label: 'Assets Coverage Percentage' },
                    { id: 'otCoverage', label: 'OT Coverage' },
                    { id: 'otSystemsMonitored[]', label: 'OT Systems Monitored', isArray: true },
                    { id: 'percentageOTAssets', label: 'OT Assets Coverage Percentage' },
                    { id: 'cyberTools[]', label: 'Cybersecurity Tools', isArray: true },
                    { id: 'cyberToolsOther', label: 'Other Tools' }
                ],

            };

            // Generate summary HTML
            Object.keys(sections).forEach(sectionTitle => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'review-summary-item';

                const sectionHeading = document.createElement('h3');
                sectionHeading.className = 'h5 mb-3';
                sectionHeading.style.color = 'var(--primary)';
                sectionHeading.innerHTML = `<i class="fas fa-folder-open me-2"></i>${sectionTitle}`;
                sectionDiv.appendChild(sectionHeading);

                const questionsList = document.createElement('div');

                sections[sectionTitle].forEach(question => {
                    const values = [];
                    if (question.isArray) {
                        // Handle array inputs (checkboxes)
                        const checkboxes = form.querySelectorAll(`[name="${question.id}"]:checked`);
                        checkboxes.forEach(cb => values.push(cb.value));
                    } else {
                        // Handle single inputs
                        const input = form.querySelector(`[name="${question.id}"]`);
                        if (input) {
                            if (input.type === 'radio' || input.type === 'checkbox') {
                                const selected = form.querySelector(`[name="${question.id}"]:checked`);
                                if (selected) values.push(selected.value);
                            } else {
                                if (input.value) values.push(input.value);
                            }
                        }
                    }

                    if (values.length > 0) {
                        const questionDiv = document.createElement('div');
                        questionDiv.className = 'mb-2';

                        const questionLabel = document.createElement('div');
                        questionLabel.className = 'review-question';
                        questionLabel.textContent = question.label;

                        const answerDiv = document.createElement('div');
                        answerDiv.className = 'review-answer';
                        answerDiv.textContent = values.join(', ');

                        questionDiv.appendChild(questionLabel);
                        questionDiv.appendChild(answerDiv);
                        questionsList.appendChild(questionDiv);
                    }
                });

                if (questionsList.children.length > 0) {
                    sectionDiv.appendChild(questionsList);
                    summaryContainer.appendChild(sectionDiv);
                }
            });
        }

        async function submitForm() {
            if (!document.getElementById('confirmAccuracy').checked) {
                document.getElementById('confirmAccuracy').classList.add('is-invalid');
                return;
            }

            // Prepare submission data
            const form = document.getElementById('educationSurveyForm');
            const formData = new FormData(form);
            const data = {
                Sector: "education",
                Answers: []
            };



            // Map form fields to question IDs (1-70 as per your database)
            const questionMap = {
                // Basic Information
                // Basic Information
                'orgName': 1,               // Organization Name
                'entitySector': 2,           // Government/Private sector
                'eduType': 3,                // Educational entity type
                'eduTypeOther': 3,           // Other educational type

                // IT Infrastructure
                'numCampuses': 4,            // Number of campuses
                'campusLocations[]': 5,        // Campus locations
                'numFirewalls': 6,           // Number of firewalls
                'numEmailGateways': 7,       // Email security gateways
                'numWAF': 8,                 // Web Application Firewalls
                'numIPS': 9,                // Intrusion Prevention Systems
                'numAntimalware': 10,        // Anti-malware systems
                'otherCyberDevices': 11,     // Other cybersecurity devices

                // Servers
                'numEmailServers': 12,       // Email servers
                'numAppServers': 13,         // Application servers
                'numDbServers': 14,          // Database servers
                'numWebServers': 15,         // Web servers
                'otherServers': 16,          // Other servers

                // Network Devices
                'numRouters': 17,            // Routers
                'numSwitches': 18,           // Switches
                'numWirelessAccessPoints': 19, // Wireless access points
                'numNetworkMonitoring': 20,  // Network monitoring devices
                'otherNetworkDevices': 21,   // Other network devices

                // OT/IoT Devices
                'bmsDevices': 22,            // BMS devices
                'hvacSystems': 23,           // HVAC systems
                'upsSystems': 24,            // UPS systems
                'smartLighting': 25,         // Smart lighting
                'accessControl': 26,         // Access control/CCTV
                'smartClassroom': 27,        // Smart classroom tech
                'envSensors': 28,            // Environmental sensors
                'labEquipment': 29,           // Lab equipment
                'otherOtDevices': 30,    //any additional OT/IoT/IIoT devices

                // SOC Questions
                'hasSOC': 31,                // Has SOC
                'socType': 32,               // SOC type
                'socCoverage': 33,           // SOC environments
                'socOperationalTime': 34,    // SOC operational time
                'numCampusesOperated': 35,   // Campuses operated
                'numMonitoredCampuses': 36,  // Campuses monitored
                'numLogsCampuses': 37,       // Campuses sending logs
                'integratedSystems': 38,     // Integrated systems
                'percentageAssets': 39,      // Assets coverage %
                'otCoverage': 40,            // OT coverage
                'otSystemsMonitored': 41,    // OT systems monitored
                'percentageOTAssets': 42,    // OT assets coverage %
                'cyberTools': 43,            // Cybersecurity tools
                'cyberToolsOther': 43,       // Other tools
                educationMonitoringTools: 44,
                threatSimulations: 45,
                incidentPlaybooks: 46,
                siemThreatIntel: 47,
                socSoarPlatforms: 48,
                systemsIntegratedSiem: 49,
                realtimeCorrelation: 50,
                regulatoryRequirements: 51,
                governanceStructure: 52,
                socReadinessAssessments: 53,
                socAudits: 54,
                docCyberRoles: 55,
                docSocProcedures: 56,
                crownJewelSystems: 57,
                businessImpactAnalysis: 58,
                itSecurityTeam: 59,
                cisoRole: 60,
                socTeamSize: 61,
                socOperate247: 62,
                socCentralized: 63,
                logManagementTools: 64,
                socIntegrateCert: 65,
                threatHunting: 66,
                iotThreatIntel: 67,
                legacySystemsChallenges: 68,
                soarIntegration: 69,
                socBudget: 70,
            };

            formData.forEach((value, key) => {
                // Remove [] for mapping (works for both campusLocations and campusLocations[])
                const cleanKey = key.replace(/\[\]$/, '');
                const questionId = questionMap[key] || questionMap[cleanKey];
                if (!questionId) return;

                // Special handling for eduType
                if (cleanKey === 'eduType') {
                    data.Answers.push({ QuestionId: 3, Value: value });
                    if (value === 'Other' && formData.get('eduTypeOther')) {
                        data.Answers.push({ QuestionId: 3, Value: formData.get('eduTypeOther') });
                    }
                    return;
                }

                if (cleanKey === 'eduTypeOther') return;

                // Special handling for multi-value fields (checkboxes/multiselect)
                if (key.endsWith('[]')) {
                    const values = formData.getAll(key);
                    values.forEach(val => {
                        data.Answers.push({ QuestionId: questionId, Value: val });
                    });
                    return;
                }

                // Special handling for specific "other" fields (if any)
                if (cleanKey === 'cyberToolsOther' && value) {
                    data.Answers.push({ QuestionId: 43, Value: value });
                    return;
                }

                // Handle all other fields (text, number, single select, etc)
                if (value !== undefined && value !== null && value !== '') {
                    data.Answers.push({ QuestionId: questionId, Value: value });
                }
            });

            try {
                // إظهار مؤشر التحميل
                const submitBtn = document.getElementById('nextBtn');
                submitBtn.innerHTML = '<span class="spinner"></span> Submitting...';
                submitBtn.disabled = true;

                // إرسال البيانات إلى الخادم
                const response = await fetch('/api/survey/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + getAuthToken() // إذا كنت تستخدم authentication
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }

                const result = await response.json();
                alert('Survey submitted successfully!');

                // إعادة تعيين النموذج
                form.reset();
                currentStepIndex = 0;
                showStep(currentStepIndex);
                updateProgress();

            } catch (error) {
                console.error('Error:', error);
                alert('Error submitting survey. Please try again.');
            } finally {
                submitBtn.innerHTML = '<i class="fas fa-check"></i> Submit Survey';
                submitBtn.disabled = false;
            }
        }

        function getAuthToken() {
            return localStorage.getItem('authToken');
        }
    </script>
</body>
</html>